<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>User profile</title>
    <link rel="stylesheet" href="/css/site.css"/>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
    <script src="/js/toggleMobileMenu.js"></script>
</head>
<body th:object="${userDTO}">

<div class="site">

    <header th:replace="~{fragments/header.html :: header}"></header>

    <div class="main">

        <main class="site-content" id="main-profile">

            <div class="mt-2 pb-2 text-center border-bottom border-3 border-danger-subtle" id="main-categories">
                <h2>Profile</h2>
            </div>

            <th:block th:if="*{email.equals(#authentication.name)}">

                <div class="main-section-content" id="main-profile-section">

                   <section class="profile-section">
                           <h5>
                               Name:
                           </h5>
                           <div class="container d-flex justify-content-between align-items-center">
                               <p th:text="*{fullName}"></p>
                               <!--<button type="button" class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#editUserFullName">
                                   Edit name
                               </button>-->
                               <a href="#" class="open-profile-modal" data-bs-toggle="modal" data-bs-target="#editUserFullName">Edit name</a>
                           </div>
                   </section>

                    <section class="profile-section">
                        <h5>
                            Email:
                        </h5>
                        <div class="container-fluid d-flex justify-content-between align-items-center">
                            <p th:text="*{email}"></p>
                            <!--<button type="button" class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#editUserEmail">
                                Edit email
                            </button>-->
                            <a href="#" class="open-profile-modal" data-bs-toggle="modal" data-bs-target="#editUserEmail">Edit email</a>
                        </div>
                    </section>

                    <section class="profile-section">
                        <h5>
                            Profile picture:
                        </h5>
                        <div class="container-fluid d-flex justify-content-between align-items-center">
                            <div class="in-profile ratio ratio-1x1 rounded-circle overflow-hidden"
                                 th:if="*{profilePicture != null}">
                                <img th:src="'data:' + *{profilePicture.type} + ';base64,' + *{profilePicture.imageDataBase64}"
                                     th:alt="*{profilePicture.name}" class="card-img-top img-cover">
                            </div>
                            <div class="in-profile ratio ratio-1x1 rounded-circle overflow-hidden"
                                 th:unless="*{profilePicture != null}">
                                <img th:src="@{/images/blank-profile-picture.webp}">
                            </div>
                            <!--<button type="button" class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#editUserProfilePicture">
                                Change picture
                            </button>-->
                            <th:block th:if="*{profilePicture != null}">
                                <a href="#" class="open-profile-modal" data-bs-toggle="modal" data-bs-target="#deleteProfilePictureModal">Delete picture</a>
                            </th:block>

                            <a href="#" class="open-profile-modal" data-bs-toggle="modal" data-bs-target="#editUserProfilePicture">Add/Change picture</a>
                        </div>
                    </section>

                    <section class="profile-section">
                        <h5>
                            Password:
                        </h5>
                        <div class="container-fluid d-flex justify-content-between align-items-center">
                            <p>********</p>
                            <!--<button type="button" class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#editUserPassword">
                                Change password
                            </button>-->
                            <a href="#" class="open-profile-modal" data-bs-toggle="modal" data-bs-target="#editUserPassword">Change password</a>
                        </div>
                    </section>

                </div>
            </th:block>
        </main>
    </div>

    <footer th:replace="~{fragments/footer.html :: footer}"></footer>

    <div th:replace="~{fragments/modal-edit-user-profile.html :: modal-edit-user-profile}"></div>

    <script th:src="@{/js/validateEditUserProfile.js}"></script>

</div>

</body>
</html>